<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/CDNSFree2/Plyr/plyr.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="shortcut icon" href="img/comprimidos/ico/ico.ico" type="image/x-icon">
    <title>Document</title>
</head>

<body>

   <form name="form_main">
  <div>
    <span id="hour">00</span>:<span id="minute">01</span>:<span id="second">00</span>
  </div>

  <br />
  <button class="start_" type="button" name="start">start / pause</button>
</form>

<!--here--><input value="1" class="receive_time_min">

<div id="video_container">
  <video poster="http://media.w3.org/2010/05/sintel/poster.png" preload="none" controls="" id="video" tabindex="0">
      <source type="video/mp4" src="video/1. BABY Internet ft Jotapills - 667 casa bomba_720P HD.mp4" id="mp4"></source>
      <p>Your user agent does not support the HTML5 Video element.</p>
  </video>
  </div>
  
  <div>Current Time : <span  id="currentTime">0</span></div>
  <div>Total time : <span id="totalTime">0</span></div>
  <div class="result"></div>



    <form name="calcform" action="Calc()" method="post">
      <input value="20" class="timersec_video">
      <br>
          <input name="result" value="60" class="time" id="">
    </form>

<br>
<button style="height: 20px; width: fit-content;" onclick="calcular()">calcular</button>

<script>

$(function(){
$('#currentTime').html($('#video_container').find('video').get(0).load());
$('#currentTime').html($('#video_container').find('video').get(0).play());
})
setInterval(function(){
$('#currentTime').html($('#video_container').find('video').get(0).currentTime.toFixed(0));
$('#totalTime').html($('#video_container').find('video').get(0).duration/60);    
},500)


      "use strict";

let hour = 0;
let minute = 0;
let second = 0;
let millisecond = 0;
let cron;

    var timer_ = false;
$(".start_").click(function() {
    if (timer_ == false) {
      timer_ = true;
      start();
    }
    else {
      timer_ = false
      pause();
    }
})

function start() {
  pause();
  cron = setInterval(() => { timer(); }, 10);
}

function pause() {
  clearInterval(cron);
}

function timer() {
  if ((millisecond += 10) == 1000) {
    millisecond = 0;
    second++;
  }
  
  if (second == 60) {
    second = 0;
    minute++;
  }

  if (minute == 60) {
    minute = 0;
    hour++;
  }

  document.getElementById('second').value = returnData(second);
}

function returnData(input) {
  return input > -1 ? input : `0${input}`
}

function returnData(input) {
  if (second ==  $(".time").val()) {
    alert("contabilizou uma view seu tempo foi de: "  + minute + ":" + second)
  }
}

$(document).ready(function()  {
    if ($(".receive_time_min").val() < 1) {
      calcular()
      starti();
    }
    else {
      calcularmin()
      starti();
}})


function calcular() {
  var calc = $(".timersec_video").val()

  if (calc > 4 ) {
    $(".time").val(3)
  }
  
  if (calc > 9 ) {
    $(".time").val(3)
  }

  if (calc > 10) {
    $(".time").val(4)
  }

  if (calc > 15) {
    $(".time").val(7)
  }

  if (calc > 20) {
    $(".time").val(7)
  }

  if (calc > 24) {
    $(".time").val(7)
  }

  if (calc > 29) {
    $(".time").val(10)
  }

  if (calc > 34) {
    $(".time").val(10)
  }

  if (calc > 40) {
    $(".time").val(12)
  }

  if (calc > 49) {
    $(".time").val(12)
  }

  if (calc > 55) {
    $(".time").val(13)
  }

}

function calcularmin() {
  var calc = $(".timersec_video").val()

  if (calc > 4 ) {
    $(".time").val(13)
  }
  if (calc > 9 ) {
    $(".time").val(13)
  }

  if (calc > 10) {
    $(".time").val(13)
  }

  if (calc > 15) {
    $(".time").val(14)
  }

  if (calc > 20) {
    $(".time").val(14)
  }

  if (calc > 24) {
    $(".time").val(15)
  }

  if (calc > 29) {
    $(".time").val(15)
  }

  if (calc > 34) {
    $(".time").val(15)
  }

  if (calc > 40) {
    $(".time").val(15)
  }

  if (calc > 49) {
    $(".time").val(15)
  }

  if (calc > 55) {
    $(".time").val(15)
  }

}

</script>

</body>
</html>